<!-- current_users.html -->

<!DOCTYPE html>
<html>
<head>
    <title>Current Users</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>Currently Logged In Users</h1>
    <ul id="userList">
        <!-- 사용자 목록은 여기에 표시됩니다. -->
    </ul>

    <script>
        // 주기적으로 서버에 사용자 목록 요청을 보내고 화면을 업데이트하는 함수
        function updateUserList() {
            $.ajax({
                url: '/current_users_api/',
                success: function(response) {
                    // 서버로부터 받은 사용자 목록을 화면에 업데이트
                    var userList = response.users;
                    var userListHTML = '';
                    for (var i = 0; i < userList.length; i++) {
                        userListHTML += '<li>' + userList[i] + '</li>';
                    }
                    $('#userList').html(userListHTML);
                }
            });
        }

        // 페이지 로드 후 초기 사용자 목록 업데이트
        $(document).ready(function() {
            updateUserList();
            // 10초마다 사용자 목록 업데이트
            setInterval(updateUserList, 30000);
        });
    </script>
</body>
</html>
